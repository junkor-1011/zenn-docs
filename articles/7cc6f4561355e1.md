---
title: "electron + electron-builder + viteã§ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚‹"
emoji: "ğŸ–¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["electron", "vite", "pnpm", "typescript"]
published: false
---

web æŠ€è¡“ã‚’å¿œç”¨ã—ã¦ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹æŠ€è¡“ã®ä¸€ã¤ã¨ã—ã¦[electron](https://www.electronjs.org/ja/)ãŒã‚ã‚Šã€
ã‚¢ãƒ—ãƒªã®ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ GUI éƒ¨åˆ†ã¾ã§ã®å…¨ã¦ã‚’ Node.js ã§æ§‹ç¯‰ã§ãã‚‹ãŸã‚é–‹ç™ºè¨€èªãŠã‚ˆã³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä¸€å…ƒåŒ–ã§ãã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã€‚

[Vite](https://ja.vitejs.dev/)ãŒå…¬å¼ã§æä¾›ã—ã¦ã„ã‚‹[ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ](https://ja.vitejs.dev/guide/#vite-%E3%82%92%E3%82%AA%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A6%E3%82%99%E8%A9%A6%E3%81%99)ã‚’ä½¿ã£ã¦ SPA ãªæ„Ÿã˜ã® GUI ã‚’ä½œã‚Šã€æ›´ã«[electron-builder](https://www.electron.build/)ã‚’ä½¿ã†ã“ã¨ã§ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ“ãƒ«ãƒ‰(ä»Šå›ã¯ Linux ã¨ Windows)ã‚’è¡Œã†æ–¹æ³•ã‚’èª¿ã¹ãŸã®ã§å‚™å¿˜éŒ²ã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã€‚

ãªãŠã€ä»Šå›ã®èª¿æŸ»ã§ä½œæˆã—ãŸãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚ˆã†ãªã‚‚ã®ã¯ä»¥ä¸‹ã«æ ¼ç´ã—ãŸï¼š

https://github.com/junkor-1011/electron-vite-react-sample-2023/tree/zenn_2023-06-15

å…¥ã‚Œè¾¼ã‚“ã§ã„ã‚‹è¦ç´ ã¨ã—ã¦ã¯ã€

- main/renderer ãƒ—ãƒ­ã‚»ã‚¹é–“ã® IPC é€šä¿¡
- (å…¨éƒ¨ã§ã¯ç„¡ã„ãŒ)ã‚ã‚‹ç¨‹åº¦ã®[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](https://www.electronjs.org/ja/docs/latest/tutorial/security)å¯¾ç­–
  - Content Security Policy ã®æœ‰åŠ¹åŒ–
  - ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚„æ–°è¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç«‹ã¡ä¸Šã’ã®åˆ¶é™

ã‚ãŸã‚Šã‚’ä¾‹ã¨ã—ã¦å®Ÿè£…ã—ã¦ã„ã‚‹ã€‚

ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã«ã¯ pnpm ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ãŠã‚Šã€

- è¦ªãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: [electron-builder](https://www.electron.build/)ã«ã‚ˆã‚‹ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰
- `electron`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: electron ã® main ãƒ—ãƒ­ã‚»ã‚¹ã®å‡¦ç†ã‚’è¨˜è¿°
- `renderer`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: electron ã® renderer ãƒ—ãƒ­ã‚»ã‚¹(GUI éƒ¨åˆ†)ã®å‡¦ç†ã‚’è¨˜è¿°

ã®ã‚ˆã†ãªæ„Ÿã˜ã§è²¬å‹™åˆ†é›¢ã‚’ã—ã¦ã„ã‚‹ã€‚

æ§‹æˆã¨æ‰‹é †ã®è¦ç‚¹ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦ä»¥ä¸‹ã«è¨˜è¿°ã—ã¦ã„ãã€‚

## æ¤œè¨¼ç’°å¢ƒã‚„ä¸»è¦ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©

å†ç¾æ€§ã®ãŸã‚ã€ãƒ¡ãƒ¢ã—ã¦ãŠã:

- Linux(Fedora38) on WSL2@Windows11
  - CPU ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯æ™®é€šã« x86_64
- Node.js v18.16.0
  - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯[pnpm](https://pnpm.io/ja/)@v8.6.x ã‚’ä½¿ç”¨
  - [Electron ã®ãƒªãƒªãƒ¼ã‚¹](https://www.electronjs.org/ja/docs/latest/tutorial/electron-timelines)ãªã©ã‚’å‚è€ƒã«ã€ä½¿ç”¨ã™ã‚‹ Electron ã§ä½¿ã‚ã‚Œã‚‹ Node ã¨ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆã‚ã›ã¦ãŠãã¨ç„¡é›£
- electron@25.1.0
- electron-builder@23.6.0
- TypeScript@5.0.4
- vite@4.3.9
- react@18.2.0

## å„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ã¤ã„ã¦ã®è§£èª¬

éƒ½åˆä¸Šã€

0. pnpm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ§‹ç¯‰
1. main ãƒ—ãƒ­ã‚»ã‚¹(`electron`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹)
2. renderer ãƒ—ãƒ­ã‚»ã‚¹(`renderer`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹)
3. `electron-builder`ã«ã‚ˆã‚‹ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰(è¦ªãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹)

ã®é †ã§è¨˜è¿°ã—ã¦ã„ãã€‚

### 0. pnpm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ§‹ç¯‰

å€‹äººçš„ã« node_modules ã®ä¸­èº«ã‚’ãªã‚‹ã¹ããã‚Œã„ã«ã—ã¦ãŠããŸã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã«ã¯ pnpm ã‚’ä½¿ã†ã€‚
(è©¦ã—ã¦ã„ãªã„ãŒã€npm ã‚„ yarn ã§ã‚‚æ¦‚ã­åŒæ§˜ã«ä½œã‚Œã‚‹ã¯ãšã€‚)

pnpm ã‚’ä½¿ã£ãŸãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä½œæˆãƒ»ç®¡ç†ã®åŸºæœ¬ã¯[å…¬å¼ã®è§£èª¬](https://pnpm.io/ja/workspaces)ã‚’å‚ç…§ã®ã“ã¨ã€‚

ã¾ãšã¯é©å½“ãªç©ºã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ãã“ã«ç§»å‹•ã—ã¦

```bash
pnpm init
```

ãªã©ã§ node ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç«‹ã¡ä¸Šã’ã‚‹ã€‚

ä»Šå›ã¯ 2 ã¤ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹: `electron`ã¨`renderer`ã‚’ä½œã‚‹ã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã®`pnpm-workspace.yaml`ã‚’ä½œæˆã™ã‚‹:

```yaml:pnpm-workspace.yaml
packages:
  - 'electron'
  - 'renderer'
  # electron-builderã«ã‚ˆã‚Šç”Ÿæˆã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: distä»¥ä¸‹ã«`package.json`ãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã€å¿µã®ãŸã‚é™¤å¤–
  - '!**/dist/**'
```

ã¾ãŸã€å¾Œã€…`electron-builder`ã‚’ä½¿ã†ã¨ãã®ãŸã‚ã«`electron`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯[public-hoisted-pattern](https://pnpm.io/ja/npmrc#public-hoist-pattern)ã«å«ã‚ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ãŸã‚ã€
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`.npmrc`ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã‚’è¿½åŠ ã—ã¦ãŠã:

```dosini:npmrc
public-hoist-pattern[] = electron
```

#### (pnpm è¨­å®šã®è£œè¶³)

å¾Œã§ä½¿ç”¨ã™ã‚‹`electron-builder`ã®[pnpm å‘ã‘ã®èª¬æ˜](https://www.electron.build/#note-for-pnpm)ã‚’è¦‹ã‚‹ã¨ã€
`.npmrc`ã§

```dosini:.npmrc
node-linker = hoisted

# or
public-hoist-pattern = *

# or
shamefully-hoist = true
```

ã‚’è¨­å®šã™ã‚‹ã‚ˆã†ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€npm ã‚„ yarn(v1)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸã¨ãã¨åŒæ§˜ã«ã€flat ãª`node_modules`ãŒä½œæˆã•ã‚Œã‚‹ã€‚

ãŒã€main ãƒ—ãƒ­ã‚»ã‚¹ãŠã‚ˆã³ renderer ãƒ—ãƒ­ã‚»ã‚¹ãã‚Œãã‚Œãƒ“ãƒ«ãƒ‰ã™ã‚‹éš›ã«å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠã‘ã°å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ flat ã«ç½®ãå¿…è¦ã¯ç„¡ã„ã€‚ãã®ãŸã‚ã€ä»Šå›ã¯`electron`ã ã‘ã‚’`public-hoist-pattern[]`ã«å«ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹

### 1. main ãƒ—ãƒ­ã‚»ã‚¹(`electron`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹)

ä¾‹ãˆã°æ¬¡ã®ã‚ˆã†ã«ã—ã¦`electron`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹:

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œã™ã‚‹

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir electron

# â†‘ã§ä½œæˆã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd electron

# package.jsonã‚’ä½œæˆã—ã¦ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä½œæˆ
pnpm init
```

æ¬¡ã«ã€å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã

```bash
pnpm add -D \
    electron \
    electron-is-dev electron-serve \
    typescript @types/node \
    esbuild tsx

# ãã®ä»–å¿…è¦ãªã‚‚ã®ãŒã‚ã‚Œã°
```

å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è£œè¶³:

- `electron`: main ãƒ—ãƒ­ã‚»ã‚¹ã®å‡¦ç†ã«å¿…é ˆãªã‚³ã‚¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- [electron-is-dev](https://github.com/sindresorhus/electron-is-dev), [electron-serve](https://github.com/sindresorhus/electron-serve): electron é–‹ç™ºã«ãŠã‘ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  - (ãã‚Œãã‚Œè©³ç´°ã¯å¾Œè¿°)
- `typescript`, `@types/node`: TypeScript ã§å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã«å°å…¥
- [esbuild](https://esbuild.github.io/): main ãƒ—ãƒ­ã‚»ã‚¹ã®å‡¦ç†ã‚’ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«\&ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ãŸã‚ã«åˆ©ç”¨
- [tsx](https://github.com/esbuild-kit/tsx): ãƒ“ãƒ«ãƒ‰ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©ã®å®Ÿè¡Œã«åˆ©ç”¨

main ãƒ—ãƒ­ã‚»ã‚¹éƒ¨åˆ†ã‚’ electron ã‚¢ãƒ—ãƒªã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã¯`index.js`ãŠã‚ˆã³`preload.js`ã® 2 ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æœ€çµ‚çš„ã«ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€
ãã®ãŸã‚`index.ts`ãŠã‚ˆã³`preload.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦é–‹ç™ºã—ã¦ã„ãã€‚
(ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„è‡ªä½œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã“ã‚Œã‚‰ã«ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹)

ä»Šå›ã¯æ¬¡ã®ã‚ˆã†ãªæ§‹æˆã§ main ãƒ—ãƒ­ã‚»ã‚¹éƒ¨åˆ†ã®å®Ÿè£…ã‚’è¡Œã£ãŸ:

```sh
# @rendererãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

tree --gitignore -a -C -I 'node_modules'
# .
# â”œâ”€â”€ index.ts
# â”œâ”€â”€ lib # è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒª
# â”‚Â Â  â”œâ”€â”€ channels.ts # IPCé€šä¿¡ã§rendererãƒ—ãƒ­ã‚»ã‚¹ã¨ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã‚’è¨˜è¿°
# â”‚Â Â  â””â”€â”€ handler.ts # IPCé€šä¿¡ã®éš›ã«mainãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œã™ã‚‹handlerå‡¦ç†ã‚’è¨˜è¿°
# â”œâ”€â”€ package.json
# â”œâ”€â”€ preload.ts
# â”œâ”€â”€ scripts
# â”‚Â Â  â””â”€â”€ build.ts # index.jsãŠã‚ˆã³preload.tsã®ãƒ“ãƒ«ãƒ‰ã«å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# â””â”€â”€ tsconfig.json
#
# 3 directories, 7 files
```

å„ãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã—ã¦ã€ã‹ã„ã¤ã¾ã‚“ã§ä»¥ä¸‹ã§èª¬æ˜ã—ã¦ã„ã:

#### `tsconfig.json`(main ãƒ—ãƒ­ã‚»ã‚¹ç”¨)

`tsc --init`ã§ç”Ÿæˆã•ã‚Œã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚‚ã®ã‚’ä¸€éƒ¨æ”¹å¤‰ã—ã¦ä½œæˆã™ã‚‹:

```json:tsconfig.json
{
  "compilerOptions": {
    "target": "es2022",
    "lib": [
      "esnext"
    ],
    "module": "commonjs",
    "moduleResolution": "bundler",
    "noEmit": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true
  },
  "exclude": [
    "./scripts"
  ]
}
```

- `target`ã«ã¤ã„ã¦ã€æœ€æ–°ç‰ˆã® Electron ã§ã¯ Node.js v18.x ãŒå‹•ä½œã™ã‚‹ãŸã‚ target ã¯ãã“ã¾ã§å¤ãã™ã‚‹å¿…è¦ãŒç„¡ã„ã€‚
  ãã®ãŸã‚ã€target ã¯`es2022`ã‚’æŒ‡å®šã—ã¦ã„ã‚‹
- `esbuild`ã§ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ãŸã‚ã€`moduleResolution: bundler`, `noEmit: true`(tsc ã¯å‹ãƒã‚§ãƒƒã‚¯ã®ã¿ã‚’å®Ÿè¡Œã•ã£ã›ã‚‹)ã‚’è¨­å®šã—ã¦ã„ã‚‹
- ãƒ“ãƒ«ãƒ‰ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè‡ªä½“ã¯ main ãƒ—ãƒ­ã‚»ã‚¹ã®å‡¦ç†ã¨ç„¡é–¢ä¿‚ãªã®ã§ã€`exclude`ã—ã¦ãŠã

#### `index.ts`

main ãƒ—ãƒ­ã‚»ã‚¹ã®æœ¬ä½“ã«ç›¸å½“:

å…¨ä½“ã¯ â†“

https://github.com/junkor-1011/electron-vite-react-sample-2023/blob/zenn_2023-06-15/electron/index.ts

ä»¥ä¸‹ã€å¤§ã¾ã‹ãªã¾ã¨ã¾ã‚Šæ¯ã«åŒºåˆ‡ã£ã¦è§£èª¬ã‚’åŠ ãˆã¦ã„ãã€‚

##### ã‚¢ãƒ—ãƒªã®åŸºæœ¬è¨­å®šï¼‹ renderer ãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•

```typescript:index.ts(æŠœç²‹)
// Native
import { join } from 'node:path';

// Packages
import { BrowserWindow, app, ipcMain, session, shell } from 'electron';
import serve from 'electron-serve';
import isDev from 'electron-is-dev';

const loadURL = serve({
  directory: 'renderer/dist',
});

// Prepare the renderer once the app is ready
app.on('ready', async () => {
  // session
  session.defaultSession.webRequest.onHeadersReceived((details, callback) => {
    const cspContents = isDev
      ? ["default-src 'self' 'unsafe-inline'"]
      : ["default-src 'self'"];
    callback({
      responseHeaders: {
        ...details.responseHeaders,
        'Content-Security-Policy': cspContents,
      },
    });
  });

  const mainWindow = new BrowserWindow({
    width: 1200,
    height: 900,
    webPreferences: {
      preload: join(__dirname, 'preload.js'),
    },
  });

  if (isDev) {
    await mainWindow.loadURL('http://localhost:5173');
  } else {
    // production
    await loadURL(mainWindow);
  }
});

// Quit the app once all windows are closed
app.on('window-all-closed', app.quit);
```

##### å¤–éƒ¨ URL ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸéš›ã®æŒ™å‹•

```typescript:index.html(æŠœç²‹)
// Open OS browser for external url
app.on('web-contents-created', (_event, contents) => {
  contents.setWindowOpenHandler(({ url }) => {
    // allow only specific urls
    if (url === 'https://vitejs.dev/' || url === 'https://react.dev/') {
      setImmediate(() => {
        shell.openExternal(url);
      });
    }
    return { action: 'deny' };
  });

  // disallow unnecessary navigation
  contents.on('will-navigate', (event, _navigationUrl) => {
    event.preventDefault();
  });
});
```

##### renderer ãƒ—ãƒ­ã‚»ã‚¹ã¨ã®é€£æº

```typescript:index.html(æŠœç²‹)
// Own Libraries
import { exampleChannel1, exampleChannel2 } from './lib/channels';
import { invokeExampleHandler, sendExampleHandler } from './lib/handler';

// (...)

// example of send from renderer
ipcMain.on(exampleChannel1, sendExampleHandler);

// example of invoke from renderer
ipcMain.handle(exampleChannel2, invokeExampleHandler);
```
