---
title: "Hyper-VでLinux環境(ArchLinux)を立ち上げてみる"
emoji: "😸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["archlinux", "hyperv", "windowsterminal", "wsl"]
published: false
---

特にArchLinuxに詳しいとかでは無いが、なんとなくやってみたくなったのでメモ。

## 方針・目標など

WindowsからHyper-V上のarchlinuxへの接続にはsshを使う。
Windows Terminalのプロファイルに登録しておくことで、WSLを起動するのと大きくは変わらない使用感で楽に起動できるようにする。

ゆるふわ勢なのでインストールには`archinstall`:

https://wiki.archlinux.org/title/archinstall

https://github.com/archlinux/archinstall

を使ってあまり頑張らずにやる。
https://github.com/archlinux/archinstall
([Manjaro](https://manjaro.org/)にDesktop無しのサーバー版があればそれで良かったような、という気がする)

ユーザーの作成やssh周りの設定などは、鍵の登録を自動化しやすかったりパッケージインストールなど諸々のセットアップができるので`cloud-init`を使って行う。

https://cloud-init.io/

(他のディストリビューションでも知見を使い回しやすいのも大きい)

## 手順

![](https://storage.googleapis.com/zenn-user-upload/79817e604016-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/4a10cd833a77-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/98b35138e09b-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/0476bd0341d5-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/8cff635f7cd3-20240517.png)

https://ftp.jaist.ac.jp/pub/Linux/ArchLinux/iso/2024.05.01/

![](https://storage.googleapis.com/zenn-user-upload/b59146ec2ae8-20240517.png)

↑Linuxを起動する際は必ず「セキュアブート」をOFFにする
(デフォルトではONになっているが、OFFにしないと起動できない)

![](https://storage.googleapis.com/zenn-user-upload/b115c8ea559b-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/403fe732309c-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/8d6c845a1c71-20240517.png)

![](https://storage.googleapis.com/zenn-user-upload/4016c9a388ef-20240517.png)
